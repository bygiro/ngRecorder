angular.module("ng-recorder",[]).directive("ngRecorder",["$window","$parse","$compile",function(e,r,o){return contrFunction=["$scope","$timeout","$element","$attrs","$parse",function(e,r,o,t,n){o.recorder(e.options);var d=o.data("recorder_data");o.recorder("setPreview",e.ngModel),e.$watch("ngModel",function(e,r){e!=r&&o.recorder("setPreview",e)}),o.on("recording_started.recorder",function(){r()}),d.settings.flowOpts&&"undefined"!=typeof Flow?o.on("upload_completed.recorder",function(t,n,d,c){var i=o.data("$ngModelController"),a=!1;try{d=JSON.parse(d)}catch(a){console.log(a)}return!d.result||a?void(i&&i.$setValidity("uploaded",!1)):void(d.relativePath&&(e.ngModel=d.relativePath,r()))}):o.on("recording_ended.recorder",function(){var t=o.recorder("getRecordedData");o.recorder("_blobToDataURL",t,function(o){e.ngModel=o,r()})})}],{scope:{options:"=ngrOptions",ngModel:"=?"},restrict:"AE",controller:contrFunction}}]);